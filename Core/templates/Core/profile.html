{% extends 'Core/snippets/base.html' %}
{% load static %}
{% load shortcuts %}
{% block header %}
{% include 'Core/snippets/header.html' %}
{% endblock %}
{% block title %}
{{profile.first_name}} {{profile.last_name}} - CodingAlphas
{% endblock %}

{% block style %}
#leftside{
    overflow-y:hidden;
}
#leftside:hover, #leftside:active, #leftside:focus{
    overflow-y:auto;
}

.options{
    background-color:rgb(46, 168, 230,0.1);
    font-size:18px;
    width:45px;
    height:45px;
    display:flex; 
    align-items:center;
    justify-content:center;
}
.options-side , .options-side1{
    font-size:16px;
    font-weight:500;
    color:rgb(0,0,0,0.6);
    width:80%;
    display:flex; 
    align-items:center;
    justify-content:start;
    height:45px;
    padding-left:10px;

    
}
.options-side:hover{
    background-color:rgb(46, 168, 230,0.1);
    transition:1s;
}
.hero-image {
    background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.1)), url("/media/{{profile.cover}}");
    height: 15%;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    position: relative;
    border-radius:5px;
  }
  










  .sidebar {
    height: 100%;
    width: 70px;
    position: fixed;
    z-index: 1;
    top:3.8rem;
    left: 0;
    background-color: #fff;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 50px;
    display:flex;
    justify-content:start;
    flex-direction:column;
    align-items:start;
    padding-left:12px;

  }

 
  .sidebar .closebtn {
    position: absolute;
    top: 1rem;
    right: 25px;
    font-size: 20px;
    margin-left: 50px;
  }
  
  .sidebar .closebtn:hover{
      color:#2EA8E6;
  }
  .openbtn {
    font-size: 20px;
    cursor: pointer;
    background-color: #111;
    color: white;
    padding: 10px 15px;
    border: none;
  }
  
  .openbtn:hover {
    background-color: #444;
  }
  
  #main {
    transition: margin-left .5s;
    margin-left:80px;
  }
  
  /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */
  @media screen and (max-height: 450px) {
    .sidebar {padding-top: 15px;}
    .sidebar a {font-size: 18px;}
  }
.upload_image{
    width:120px; 
    height:120px;
    position:absolute;
    border-radius:50%;
    cursor:pointer;
    background-color:rgb(0,0,0,0.3);
    display:none;
 
}
.upload_image input{
    width:120px; 
    height:120px;
    border-radius:50%;
    cursor:pointer;
    opacity:0;
}
.upload_image label{
    width:120px; 
    height:120px;
    border-radius:50%;
    cursor:pointer;
    position:absolute;
    display:flex;
    justify-content:center;
    align-items:center;
    color:white;
    font-size:25px;
}
.image_upload{
    width:120px; height:120px;border:2px solid #fff; border-radius: 50%;
    cursor:pointer;
}
.image_upload:hover + .upload_image{
  cursor:pointer;
    display:block;
}
{% endblock %}
{% block body %}
<div id="mySidebar" class="sidebar shadow">
  
    <a href="javascript:void(0)" class="closebtn" onclick="openNav()"><i class="fa fa-bars"></i></a>

    <div  style="width:95%; " class="mt-1" >
        <a href="/profile/{{user}}/?method=Dashboard" >
            <div class="d-flex justify-content-start align-items-center mb-3">
                <div class="options rounded" data-toggle="tooltip" title="Dashboard" data-placement="right">
                    <i class="fa fa-pie-chart fa2"></i>
                </div>
                <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Dashboard' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                    <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                        Dashboard
                    </div>
                </div>
               
        </div>
        </a>
    </div>

   <!--
        <div style="width:95%;">
        <a href="/profile/{{user}}/?method=Timeline">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Timeline" data-placement="right">
                        <i class="material-icons" style="font-size: 18px; color:#2EA8E6;">&#xe8e5;</i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style="display:none; {%if method == 'Timeline' %} background-color:rgb(46, 168, 230,0.1);{% endif %}" >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Timeline
                        </div>
                    </div>
                    
                
               
        </div>
        </a>
    </div>
   -->

    <div style="width: 95%;">
        <a href="/profile/{{user}}/?method=Connections">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Connections" data-placement="right">
                        <i class="fa fa-users fa2" style=""></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Connections' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Connections
                        </div>
                    </div>
                
               
        </div>
        </a>
    </div>
    <div style="width: 95%;">
        <a href="/profile/{{user}}/?method=Articles">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Articles" data-placement="right">
                        <i class="fa fa-newspaper-o " style="color: #2EA8E6;"></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Articles' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                           Articles
                        </div>
                    </div>
                
               
        </div>
        </a>
    </div>

   <!--
        <div style="width: 95%;">
        <a href="/profile/{{user}}/?method=Discuss">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Discuss" data-placement="right">
                        <i class="fa fa-comments-o " style="color: #2EA8E6;"></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Discuss' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Discuss
                        </div>
                    </div>
                
               
        </div>
        </a>
    </div>
   -->

    <div style="width: 95%;">
        <a href="/profile/{{user}}/?method=Statistics">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Statistics" data-placement="right">
                        <i class="fa fa-bar-chart fa2" style=""></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Statistics' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Statistics
                        </div>
                    </div>
                
               
        </div>
        </a>

    </div>
    <div style="width: 95%;">
        <a href="/profile/{{user}}/?method=Bookmarks">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Bookmarks" data-placement="right">
                        <i class="fa fa-bookmark-o " style="color: #2EA8E6;"></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Bookmarks' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Bookmarks
                        </div>
                    </div>
                
               
        </div>
        </a>
    </div>
    <div style="width: 95%;">
        
        <a href="/profile/{{user}}/?method=Notifications">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Notifications" data-placement="right">
                        <i class="fa fa-bell-o " style="color: #2EA8E6;"></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Notifications' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Notifications
                        </div>
                    </div>
                
               
        </div>
        </a>
    </div>

    <div style="width: 95%;">
        <a href="/profile/{{user}}/?method=Setting">
            <div class="d-flex justify-content-start align-items-center mb-3">
                
                    <div class="options rounded" data-toggle="tooltip" title="Settings" data-placement="right">
                        <i class="fa fa-cog fa2"></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Settings' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            Settings & Privacy
                        </div>
                    </div>
               
        </div>
        </a>
    </div>

    <div style="width: 95%;">
        <a href="/logout/" onclick="return confirm('Are you sure you want to logout?')">
            <div class="d-flex justify-content-start align-items-center ">
                
                    <div class="options rounded" data-toggle="tooltip" title="Logout" data-placement="right">
                        <i class="fa fa-sign-out fa2 ml-1"></i>
                    </div>
                    <div class="text-color options-side rounded morecontent" style=" display:none; {%if method == 'Logout' %} background-color:rgb(46, 168, 230,0.1);{% endif %}  " >
                        <div style="display: flex; justify-content: start; align-items: center; width:100%; height:100%;">
                            logout
                        </div>
                    </div>
                
               
        </div>
        </a>
    </div>
  </div>
  
<section class="section" id="main" style="" onclick="closeNav()">
    
    <div class="container-fluid mt-5 pt-2">
        {% if method == 'Connections' %} 
            {% include 'Core/snippets/connections.html' %}
        {% endif %}
        {% if method == 'Statistics' %} 
        {% include 'Core/snippets/analytics.html' %}
{% endif %}
        <div class="row">
            {% if method == 'Notifications' %}
            <div class="col-12 col-md-12 col-lg-12  mt-4 ">
                  
                <div class="col-12 pr-5">
                  
                    {% include 'Core/snippets/notification.html' %}
                
                </div>

            </div>

            
           {% endif %}

           {% if method == 'Setting' %}
            <div class="col-12 col-md-12 col-lg-12  mt-4 ">
                  
                <div class="col-12 pr-5">
                  
                    {% include 'Core/snippets/setting.html' %}
                
                </div>

            </div>

            
           {% endif %} 

           {% if method == 'Bookmarks' %}
           <div class="col-12 col-md-12 col-lg-12  mt-4 ">
                 
               <div class="col-12 pr-5">
                 
                   {% include 'Core/snippets/bookmark.html' %}
               
               </div>

           </div>

           
          {% endif %}
          {% if method == 'BookmarksExtend' %}
           <div class="col-12 col-md-12 col-lg-12  mt-4 ">
                 <div class="row">
                    <div class="col-12  col-md-12 col-lg-3 ">

                    </div>
               <div class="col-12  col-md-12 col-lg-6 ">
                 
                   {% for i in extend %}
                   {% include 'Core/Snippets/blogextend.html' %}
                   {% endfor %}
               
               </div>
            </div>

           </div>

           
          {% endif %}
          
            {% if method == 'Articles' %}
                <div class="col-12 col-md-12 col-lg-12  mt-4 ">
                  
                    <div class="col-12 pr-5">
                        {% if method == 'Articles' %}
                        {% include 'Core/snippets/article.html' %}
                       {% endif %}
                    </div>

                </div>
            {% endif %}

           
            {% if method == 'Timeline' %} 
            <div class="col-12 col-md-12 col-lg-12 ">

            
               <div class="mt-3 d-flex  justify-content-between">
                <div>
                    <div style="font-size: 14px; font-weight: 500;">
                       <a class="btn btn-sm rounded-0" href="#" style="color:#2EA8E6; border:1px solid #2EA8E6; border-top: none;  border-left: none;  border-right: none; font-weight: 500; ">My Timeline</a>
                    </div>
                </div>
                <div>
                    <input onkeyup="myFunction()" id="myFilter"  class="form-control text-muted" type="text" style="font-size: 13px; border-radius:20px; width:270px; font-weight: 500;" placeholder="Search Tags, Keyword, User, Anything...">
                </div>
            </div>
            <div class="col-12 col-md-12 col-lg-12 mb-3 p-0">
            

         

                <div class="d-flex justify-content-center" id="loader" style="display: none;">
                    <i class="fa fa-spinner fa-spin" style="color:#E57851; display: none;" id="loader_bar"></i>
                </div>
                <div id="myItems" class="">
                    {% for i in home %}
                    {% if i.category == 'Video' %}
                   
                        {% include 'Core/Snippets/video.html' %}
                        {% elif i.category == 'Photo' %}
                        {% include 'Core/Snippets/photo.html' %}
                        {% elif i.category == 'Blog' %}
                        {% include 'Core/Snippets/blog.html' %}
                    {% endif %}

                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
          
               
               {% if method == 'Dashboard' %}
               <div class="col-12 col-md-8 col-lg-12" style="">
                {% include 'Core/snippets/dashboard.html' %}
            </div>
  
                
                
               {% endif %}
               
               
              


        

          
              
         

           
        </div>
    </div>
</section>

{% endblock %}
{% block jscss %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.js" integrity="sha512-opXrgVcTHsEVdBUZqTPlW9S8+99hNbaHmXtAdXXc61OUU6gOII5ku/PzZFqexHXc3hnK8IrJKHo+T7O4GRIJcw==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.1.1/chart.min.js" integrity="sha512-BqNYFBAzGfZDnIWSAEGZSD/QFKeVxms2dIBPfw11gZubWwKUjEgmFUtUls8vZ6xTRZN/jaXGHD/ZaxD9+fDo0A==" crossorigin="anonymous"></script>
{% endblock %}
{% block script %}

<script>

{% if method == 'Notifications' %}
setTimeout(notification_balance, 3000);
{% endif %}
    function openNav() {
  document.getElementById("mySidebar").style.width = "300px";
  document.getElementById("main").style.marginLeft = "300px";
  var arr = document.getElementsByClassName('morecontent');
  var i;
  for(i=0; i<arr.length; i++){
      arr[i].style.display = 'block';
  }
}

function closeNav() {
  document.getElementById("mySidebar").style.width = "70px";
  document.getElementById("main").style.marginLeft= "80px";
  var arr = document.getElementsByClassName('morecontent');
  var i;
  for(i=0; i<arr.length; i++){
      arr[i].style.display = 'none';
  }
}
function enable_pallete(value){
    var area = document.getElementById("pic_palette");
if(value == true){
area.style.display = "block";
}else{
    area.style.display = "none";
}
}
function loadFile(event) {
    var output = document.getElementById('blah');
    output.src = URL.createObjectURL(event.target.files[0]);
    output.onload = function() {
      URL.revokeObjectURL(output.src) // free memory
    }
    enable_pallete(true);
  };
 
  function show_default(){
        announcement("retrieve");
     
  }
function announcement(method){
  
  $.ajax({
      type:"GET",
      url:"/profile/settings/data/save/",
      data:{
          "method":method,
         
      },
      success:function(data){
          data = JSON.parse(data);
          var notify = new Notyf();
          if(data[0] == 1){
              if(method == 'retrieve'){
                document.getElementById("blah").src="/media/"+data[1];
                enable_pallete(false);
              }else{
                notify.success("Changes saved successfully!");
              }
              
          }
          else{
              notify.error("Something might be wrong!");
          }
      },
  });
}
{% if method == 'Dashboard' %}

var ctx1 = document.getElementById('myChart6').getContext('2d');
var gradient1 = ctx1.createLinearGradient(0, 0, 0, 400);
gradient1.addColorStop(0, 'rgba(250,174,50,1)');   
gradient1.addColorStop(1, 'rgba(250,174,50,0.1)');

var gradient2 = ctx1.createLinearGradient(0, 0, 0, 400);
gradient2.addColorStop(0, 'rgba(46, 168, 230,1)');   
gradient2.addColorStop(1, 'rgba(46, 168, 230,0.1)');

var gradient3 = ctx1.createLinearGradient(0, 0, 0, 400);
gradient3.addColorStop(0, 'rgba(177, 60, 46,1)');   
gradient3.addColorStop(1, 'rgba(177, 60, 46,0.1)');

var gradient4 = ctx1.createLinearGradient(0, 0, 0, 400);
gradient4.addColorStop(0, 'rgba(110, 190, 70,1)');   
gradient4.addColorStop(1, 'rgba(110, 190, 70,0.1)');
var myChart1 = new Chart(ctx1, {
    type: 'bar',
    responsive:true,
    data: {
        labels: ['Likes', 'Views', 'Saves', 'Comments'],
        datasets: [{
         
            data: [0, 0, 0, 0],
            fill: true,
            backgroundColor:[gradient3,gradient1,gradient2,gradient4],
            borderColor: ['rgba(177, 60, 46,1)','rgba(250,174,50,1)','rgba(46, 168, 230,1)','rgba(110, 190, 70,1)'],
            tension: 0.1,
            borderWidth: 1
        }]
    },
    options: {
        legend: {
            display: false
        },
          tooltips: {
            callbacks: {
              label: function(tooltipItem) {
            console.log(tooltipItem)
                return tooltipItem.yLabel;
            }
          }
        },
        plugins: {
            title: {
                display: true,
                text: 'Total likes, views, comments, saves of your published articles (Total Content Interaction).'
            },
            legend:{
                display:false
            }
        },
        
       
    }
});

function fetchingcontentall(currindex=0,updated_index=0){
    $.ajax({
        type:"GET",
        url:"/blogs/analytics/data/fetch/all/",
        data:{
            "user":"{{profile.user}}",
            "index":currindex,
            "update":updated_index,
        },
        success:function(dataval){
            dataval = JSON.parse(dataval);
            var i;
        
              // Would update the first dataset's value of 'March' to be 50
            for(i=0; i<=3; i++){
               
                myChart1.data.datasets[0].data[i] = dataval[i];
            }
           
            myChart1.update();
           
            document.getElementById('publishedcount').innerHTML = dataval[4];
            document.getElementById('draftcount').innerHTML = dataval[5];
            document.getElementById('likecount').innerHTML = dataval[0];
            document.getElementById('viewcount').innerHTML = dataval[1];
            document.getElementById('savecount').innerHTML = dataval[2];
            document.getElementById('chatcount').innerHTML = dataval[3];

        }
    });
}

window.onload = loaddataall();
function loaddataall(){
    fetchingcontentall();
}

{% endif %}

    </script>

    <script src="{% static 'js/setting.js' %}"></script>
    {% if method == 'Statistics' %}
    <script src="{% static 'js/analytics.js' %}"></script>
    {% endif %}
{% endblock %}